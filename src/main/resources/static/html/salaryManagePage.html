<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>工资管理主页</title>
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="../layui/css/layui.css"/>
	<script type="text/javascript" rel="stylesheet" src="../js/jquery-1.12.4.js"></script>
	<script type="text/javascript" rel="stylesheet" src="../js/ajaxUtil.js"></script>
    <script type="text/javascript" src="../layui/layui.js"></script>
	<script type="text/javascript" src="../js/modi_psw.js"></script>

</head>
<body class="layui-layout-body">

<!--顶端导航-->

<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo ">企业工资管理系统</div>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item" lay-unselect="">
                <a href="javascript:;"><img src="//t.cn/RCzsdCq" class="layui-nav-img"><span id="xm">xingming</span></a>
                <dl class="layui-nav-child">
					<dd><a data-method="notice" id="passwd">&nbsp;修改密码</a></dd>

                </dl>
            </li>
            <!--<li class="layui-nav-item">
                  用户欢迎您！
            </li>-->
            <li class="layui-nav-item"><a href="#" style="text-decoration:none">退出登录</a></li>
        </ul>

    </div>

    <!--侧边栏导航-->
    <div  class="layui-side layui-bg-black">
        <ul class="layui-nav layui-nav-tree layui-inline" lay-filter="demo" style="margin-right: 10px;">
            <li class="layui-nav-item ">
				<a  href="http://localhost:8080/html/mainpage.html">主页</a>
				<dl class="layui-nav-child">
					<dd><a href="http://localhost:8080/html/modifyPage.html">修改信息</a></dd>
				</dl>
            </li>
            <!--工资信息表，奖惩记录，工资数据图展示过去12个月的工资图-->
            <li class="layui-nav-item">
				<a href="http://localhost:8080/html/salaryPage.html">我的工资信息</a>
            </li>
            <li class="layui-nav-item">
				<a  href="http://localhost:8080/html/boardManage.html">公告管理</a>
				<dl class="layui-nav-child">
					<dd><a href="http://localhost:8080/html/boardPage.html">我的公告</a></dd>
				</dl>
            </li>
			<!--管理员工工资，员工信息-->
			<li class="layui-nav-item">
				<a href="http://localhost:8080/html/stuffManagePage.html">员工管理</a>
			</li>
			<!--			财务管理-->
			<li class="layui-nav-item"><a class="layui-this" href="http://localhost:8080/html/salaryManagePage.html">财务管理</a></li>

            <!--角色权限管理-->
            <li class="layui-nav-item"><a href="http://localhost:8080/html/powerPage.html">角色管理</a></li>
        </ul>
    </div>

    <!-- 内容主体区域 -->
    <div class="layui-body" style="background: #F0F0F0; margin-bottom: -45px;">
		<div style="padding: 30px">
			<div class="layui-tab layui-tab-card" >
				<ul class="layui-tab-title">
					<li class="layui-this">财务发放</li>
					<li>财务报表审核</li>


				</ul>
				<div class="layui-tab-content">


					<div class="layui-tab-item layui-show">


						<div style="padding: 10px;">

							<script type="text/html" id="toolbarDemo">
							<div class="layui-btn-group demoTable">
								<button class="layui-btn layui-btn-sm" data-type="getCheckData">按上月发放工资</button>
								<button class="layui-btn layui-btn-sm" data-type="getCheckLength">验证是否全选</button>
							</div>
							</script>
							<table class="layui-hide" id="LAY_table_user" lay-filter="user"></table>
							<script type="text/html" id="barDemo">
								<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">工资发放</a>
								<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="add">工资查询</a>
								<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
							</script>

							<div class="demoTable">
								搜索ID：
								<div class="layui-inline">
									<input class="layui-input" name="id" id="demoReload" autocomplete="off">
								</div>
								<button class="layui-btn" data-type="reload">搜索</button>
							</div>

						</div>

					</div>
					<div class="layui-tab-item">


						<table class="layui-hide" id="audit_tab" lay-filter="audit_tab"></table>

						<script type="text/html" id="auditDemo">
							<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">详情</a>
							<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="pass">通过</a>
							<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">退回</a>
						</script>

					</div>

				</div>
			</div>
		</div>


    </div>
</div>

</body>
<script type="text/javascript">


	window.onload = function() {
		ajax({
			method:HTTP_METHOD.POST,
			url:"/Info/getInfo",
			async:true,
			type:HTTP_RESPONSE_TYPE.JSON,
			callback:(data)=>{

				var json = eval(data);
				$("#xm").text(json.uname);

			}
		})
	}
	layui.use('table', function(){
		var table = layui.table;
		table.render({
			elem: '#audit_tab'
			,url: '/demo/table/user/'
			// ,toolbar: '#toolbarDemo'
			,cols: [[
				{checkbox: true, fixed: true}
				,{field:'onum', title: '审核单号', width:120, sort: true, fixed: true}
				,{field:'unum', title: '员工号', sort: true, width:120}
				,{field:'uname', title: '提交财务', width:100}
				,{field:'gender', title: '性别', width:80, sort: true}
				,{field:'department', title: '部门', width:80}
				,{field:'position', title: '职位', width:80}
				// ,{field:'bankid', title: '银行账号', sort: true, width:150}
				,{field:'date', title: '时间', width:180}
				,{field:'status', title: '审核状态', width:120}
				,{fixed:'right', title: '操作',toolbar: '#auditDemo'}
			]]
			,id: 'auditReload'
			,page: true
			,height: 310
		});

		//方法级渲染
		table.render({
			elem: '#LAY_table_user'
			,url: '/demo/table/user/'
			,toolbar: '#toolbarDemo'
			,cols: [[
				{checkbox: true, fixed: true}
				,{field:'unum', title: 'ID', width:120, sort: true, fixed: true}
				,{field:'uname', title: '员工名', width:80}
				,{field:'gender', title: '性别', width:80, sort: true}
				,{field:'department', title: '部门', width:80}
				,{field:'position', title: '职位', width:80}
				,{field:'bankid', title: '银行账号', sort: true, width:150}
				,{field:'wage', title: '工资', sort: true, width:80}
				,{field:'date', title: '上次发放时间', width:180}
				,{field:'status', title: '审核状态', width:120}
				,{fixed:'right', title: '操作',toolbar: '#barDemo'}
			]]
			,id: 'testReload'
			,page: true
			,height: 310
		});

		var $ = layui.$, active = {
			reload: function(){
				var demoReload = $('#demoReload');

				//执行重载
				table.reload('testReload', {
					page: {
						curr: 1 //重新从第 1 页开始
					}
					,where: {
						key: {
							id: demoReload.val()
						}
					}
				}, 'data');
			}
		};

		$('.demoTable .layui-btn').on('click', function(){
			var type = $(this).data('type');
			active[type] ? active[type].call(this) : '';
		});

		table.on('toolbar(test)', function(obj){
			var checkStatus = table.checkStatus(obj.config.id);
			switch(obj.event){
				case 'getCheckData':
					var data = checkStatus.data;
					layer.alert(JSON.stringify(data));
					break;
				case 'getCheckLength':
					var data = checkStatus.data;
					layer.msg('选中了：'+ data.length + ' 个');
					break;
				case 'isAll':
					layer.msg(checkStatus.isAll ? '全选': '未全选');
					break;

					//自定义头工具栏右侧图标 - 提示
				case 'LAYTABLE_TIPS':
					layer.alert('这是工具栏右侧自定义的一个图标按钮');
					break;
			};
		});
	});


    layui.use('element', function(){
        var element = layui.element;

    });
    
  layui.use('laydate', function(){
  var laydate = layui.laydate;
  
  //常规用法
  laydate.render({
    elem: '#date'
  });
  });
  
  layui.use('form', function(){
  var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功

  form.render();
});   
</script>
</html>