<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>工资管理主页</title>
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="../layui/css/layui.css"/>
    <script type="text/javascript" rel="stylesheet" src="../js/jquery-1.12.4.js"></script>
    <script type="text/javascript" rel="stylesheet" src="../js/ajaxUtil.js"></script>
    <script type="text/javascript" src="../layui/layui.js"></script>
    <script type="text/javascript" src="../js/modi_psw.js"></script>

</head>
<body class="layui-layout-body">

<!--顶端导航-->

<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo ">企业工资管理系统</div>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item" lay-unselect="">
                <a href="javascript:;"><img src="/Info/person" class="layui-nav-img"><span id="xm">xingming</span></a>
                <dl class="layui-nav-child">
                    <dd><a data-method="notice" id="passwd">&nbsp;修改密码</a></dd>

                </dl>
            </li>
            <!--<li class="layui-nav-item">
                  用户欢迎您！
            </li>-->
            <li class="layui-nav-item"><a href="#" style="text-decoration:none">退出登录</a></li>
        </ul>

    </div>

    <!--侧边栏导航-->
    <div  class="layui-side layui-bg-black">
        <ul class="layui-nav layui-nav-tree layui-inline" lay-filter="demo" style="margin-right: 10px;">
            <li class="layui-nav-item ">
                <a  href="http://localhost:8080/html/mainpage.html">主页</a>
                <dl class="layui-nav-child">
                    <dd><a href="http://localhost:8080/html/modifyPage.html">修改信息</a></dd>
                </dl>
            </li>
            <!--工资信息表，奖惩记录，工资数据图展示过去12个月的工资图-->
            <li class="layui-nav-item">
                <a href="http://localhost:8080/html/salaryPage.html">我的工资信息</a>
            </li>
            <li class="layui-nav-item layui-nav-itemed">
                <a  href="http://localhost:8080/html/boardManage.html">公告管理</a>
                <dl class="layui-nav-child">
                    <dd><a class="layui-this"  href="http://localhost:8080/html/boardPage.html">我的公告</a></dd>
                </dl>
            </li>
            <!--管理员工工资，员工信息-->
            <li class="layui-nav-item">
                <a href="http://localhost:8080/html/stuffManagePage.html">员工管理</a>
            </li>
            <!--			财务管理-->
            <li class="layui-nav-item"><a href="http://localhost:8080/html/salaryManagePage.html">财务管理</a></li>

            <!--角色权限管理-->
            <li class="layui-nav-item"><a href="http://localhost:8080/html/powerPage.html">角色管理</a></li>
        </ul>
    </div>

    <!-- 内容主体区域 -->
    <div class="layui-body" style="background: #F0F0F0; margin-bottom: -45px;">
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
 			 <legend ><span style="font-size: 30px">我的公告</span></legend>
		</fieldset>
        <hr class="layui-bg-green">

        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
            <legend ><span style="font-size: 20px">最新公告</span></legend>
        </fieldset>
		<div style="padding: 20px; background-color: #F2F2F2;">
		  <div class="layui-row layui-col-space15">
		    <div class="layui-col-md12">
		      <div class="layui-card ">
		        <div class="layui-card-header layui-col-md10">标题：<span id="latestTit">标题</span></div>
		         <div class="layui-card-header layui-col-md2">发布时间：<span id="latesttime">时间</span></div>
		        <div class="layui-card-body">
                    内容：<span id="latestcontent">内容</span>
		        </div>
		          <div class="layui-card-body">
                      发布者：<span id="latestauthor">发布者</span>
		        </div>
		      </div>
		    </div>
		  </div>
		</div>
        <hr class="layui-bg-green">

        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
            <legend ><span style="font-size: 20px">所有公告</span></legend>
        </fieldset>

        <table class="layui-hide" id = "idTest" lay-filter="test">
        </table>
 
		<script type="text/html" id="barDemo">
		  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>

		</script>

    </div>
</div>

</body>
<script type="text/javascript">

    window.onload = function() {
        ajax({
            method:HTTP_METHOD.POST,
            url:"/Info/getInfo",
            async:true,
            type:HTTP_RESPONSE_TYPE.JSON,
            callback:(data)=>{

                var json = eval(data);
                $("#xm").text(json.uname);

            }
        });

        $.post(
            "/BoardInfo/latest",
            function (data) {

                json = eval(data);
                $("#latestauthor").text(json.uname);
                $("#latestcontent").text(json.content);
                $("#latesttime").text(json.time);
                $("#latestTit").text(json.title);

            }
        )
    }


    layui.use('element', function(){
        var element = layui.element;

    });
    layui.use('table', function(){
        var table = layui.table;

        table.render({
            elem: '#idTest'
            ,url:'/BoardInfo/getAll'
            ,page: true
            ,limit:10
            ,cols: [[
                {field:'unum', width:150, sort: true, fixed: true,title:'ID'}
                ,{field:'uname',fixed: true, width:100,title:'发布者'}
                ,{field:'time', fixed: true, width:150, sort: true,title:'时间'}
                ,{field:'title',  width:150, sort: true,title:'标题'}
                ,{field:'content', width:700,title:'内容'}
                ,{fixed: 'right', width:100,  toolbar: '#barDemo',title:'操作'}

            ]]

        });


  //监听工具条
  table.on('tool(test)', function(obj){
    var data = obj.data;
    var json = eval(data);
    if(obj.event === 'detail'){
      layer.msg('公告内容：'+ json.content);
    }
  });
  

  
  $('.demoTable .layui-btn').on('click', function(){
    var type = $(this).data('type');
    active[type] ? active[type].call(this) : '';
  });
});
</script>
</html>